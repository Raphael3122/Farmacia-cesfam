<!DOCTYPE html>
<html lang="es">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous"> 
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <link type="text/css" rel="stylesheet" href="css/estilos.css">
    <link rel="stylesheet" href="css/validationEngine.jquery.css" type="text/css"/>
    <title>Inicio</title>
</head>
<body class="online">
    <header>
        
        
        <nav>
            
            <a href="indexOn.html">Inicio</a>
            <a href="index.html">Salir</a>
                
        </nav>

        <section class="textos-header"> 
            <h1> Cesfam</h1>
            <h2> Al alcance de la familia</h2>
        </section>
        <div class="container">
            <div class="col-sn-8">
                <form id="form1">
                    <label for="nombre">Codigo medicamento:</label>
                    <input type="text" name=codigo id="codigo" placeholder="Ingresar medicamento" class=" validate[required] form-control">
                        

                    <label for="nombre">Nombre de medicamento:</label>
                    <input type="text" name=medicamento id="medicamento" placeholder="Ingresar medicamento" class=" validate[required] form-control">
                       
        
                        
                    <label for="nombre">Fabricante:</label>
                    <input type="text" name="fabricante" id="Fabricante" placeholder="Ingresar Fabricante" class="validate[required] form-control ">
                       
                    <label for="nombre">Contenido:</label>
                    <input type="text" name="contenido" id="Contenido" placeholder="Ingresar nombre contenido" class="validate[required] form-control">
                        
                    <label for="nombre">Cantidad:</label>
                    <input type="text" name="cantidad" id="Cantidad" placeholder="Ingresar cantidad" class="validate[required] form-control">
                        
                    <label for="nombre">Gramaje:</label>
                    <input type="text" name="gramaje" id="Gramaje" placeholder="Ingresar Gramaje" class="validate[required] form-control">
                        
                    <label for="nombre">Caducidad:</label>
                    <input type="text" name="caducidad" id="Caducidad" placeholder="Ingresar Caducidad" class="validate[required] form-control">
                        
                    <button type="submit" class="btn btn-primary" id="boton1">Registrar</button>
                    <button type="reset" class="btn btn-primary" id="boton1">Borrar datos</button>
                        
                </form>
            </div>
        </div>
    </header>


    <script>

        var formulario = document.getElementById('form1');

        formulario.addEventListener('submit',function(e){
            e.preventDefault();
            console.log('me diste click')

            var datos = new FormData(formulario);
            var formData = new FormData();

            formData.append('username', 'Chris');

            console.log(formData)

            console.log(datos)
            console.log(datos.get('codigo'))
            console.log(datos.get('medicamento'))
            console.log(datos.get('fabricante'))
            console.log(datos.get('contenido'))
            console.log(datos.get('cantidad'))
            console.log(datos.get('gramaje'))
            console.log(datos.get('caducidad'))

            datos.append('codigo',codigo)

            var request = new XMLHttpRequest();
            request.open("POST", "http://127.0.0.1:8000/api/medicamento/");
            request.send(formData);

            fetch('http://127.0.0.1:8000/api/medicamento/',{
                method: 'POST',
                body: datos
            })
            .then(function(response)
            {
                return response.text();
            })
            .then(function(respuesta){
                console.log('aca esta')
            })
            .catch(function(err){
                console.log(err)
            })
           
        })
    </script> 
    
</body>
<script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>

<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>
<script src="js/jquery.validationEngine-es.js" type="text/javascript" charset="utf-8"></script>
<script src="js/jquery.validationEngine.js" type="text/javascript" charset="utf-8"></script>

</html>